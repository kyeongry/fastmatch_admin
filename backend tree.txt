FASTMATCH Backend
â”‚
â”œâ”€ ğŸ“ /api
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /auth (ì¸ì¦)
â”‚  â”‚  â”œâ”€ POST   /api/auth/verify-email          ì´ë©”ì¼ ì¸ì¦
â”‚  â”‚  â”œâ”€ POST   /api/auth/register              íšŒì›ê°€ì…
â”‚  â”‚  â”œâ”€ POST   /api/auth/login                 ë¡œê·¸ì¸
â”‚  â”‚  â”œâ”€ POST   /api/auth/logout                ë¡œê·¸ì•„ì›ƒ
â”‚  â”‚  â”œâ”€ POST   /api/auth/refresh               í† í° ê°±ì‹ 
â”‚  â”‚  â””â”€ GET    /api/auth/me                    í˜„ì¬ ì‚¬ìš©ì ì •ë³´
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /users (ì‚¬ìš©ì)
â”‚  â”‚  â”œâ”€ GET    /api/users                      ì‚¬ìš©ì ëª©ë¡ (Admin)
â”‚  â”‚  â”œâ”€ GET    /api/users/:id                  ì‚¬ìš©ì ìƒì„¸
â”‚  â”‚  â”œâ”€ PUT    /api/users/:id                  ì‚¬ìš©ì ìˆ˜ì •
â”‚  â”‚  â””â”€ DELETE /api/users/:id                  ì‚¬ìš©ì ì‚­ì œ (Admin)
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /brands (ë¸Œëœë“œ)
â”‚  â”‚  â”œâ”€ GET    /api/brands                     ë¸Œëœë“œ ëª©ë¡
â”‚  â”‚  â”‚  â””â”€ Query: ?status=í™œì„±&search=íŒ¨ìŠ¤íŠ¸
â”‚  â”‚  â”œâ”€ POST   /api/brands                     ë¸Œëœë“œ ìƒì„± (Admin)
â”‚  â”‚  â”œâ”€ GET    /api/brands/:id                 ë¸Œëœë“œ ìƒì„¸
â”‚  â”‚  â”œâ”€ PUT    /api/brands/:id                 ë¸Œëœë“œ ìˆ˜ì • (Admin)
â”‚  â”‚  â”œâ”€ DELETE /api/brands/:id                 ë¸Œëœë“œ ì‚­ì œ (Admin)
â”‚  â”‚  â”œâ”€ POST   /api/brands/check-duplicate     ì¤‘ë³µ í™•ì¸
â”‚  â”‚  â””â”€ GET    /api/brands/available-for-addition  ì¶”ê°€ ê°€ëŠ¥ ë¸Œëœë“œ
â”‚  â”‚     â””â”€ Query: ?proposal_id=xxx
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /managers (ë§¤ë‹ˆì €)
â”‚  â”‚  â”œâ”€ GET    /api/managers                   ë§¤ë‹ˆì € ëª©ë¡
â”‚  â”‚  â”‚  â””â”€ Query: ?brand_id=xxx&search=í™ê¸¸ë™
â”‚  â”‚  â”œâ”€ POST   /api/managers                   ë§¤ë‹ˆì € ìƒì„± (Admin)
â”‚  â”‚  â”œâ”€ GET    /api/managers/:id               ë§¤ë‹ˆì € ìƒì„¸
â”‚  â”‚  â”œâ”€ PUT    /api/managers/:id               ë§¤ë‹ˆì € ìˆ˜ì • (Admin)
â”‚  â”‚  â””â”€ DELETE /api/managers/:id               ë§¤ë‹ˆì € ì‚­ì œ (Admin)
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /branches (ì§€ì )
â”‚  â”‚  â”œâ”€ GET    /api/branches                   ì§€ì  ëª©ë¡
â”‚  â”‚  â”‚  â””â”€ Query: ?brand_id=xxx&status=í™œì„±
â”‚  â”‚  â”œâ”€ POST   /api/branches                   ì§€ì  ìƒì„± (Admin)
â”‚  â”‚  â”œâ”€ GET    /api/branches/:id               ì§€ì  ìƒì„¸
â”‚  â”‚  â”œâ”€ PUT    /api/branches/:id               ì§€ì  ìˆ˜ì • (Admin)
â”‚  â”‚  â””â”€ DELETE /api/branches/:id               ì§€ì  ì‚­ì œ (Admin)
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /options (ì˜µì…˜)
â”‚  â”‚  â”œâ”€ GET    /api/options                    ì˜µì…˜ ëª©ë¡
â”‚  â”‚  â”‚  â””â”€ Query: ?brand_id=xxx&branch_id=xxx&status=í™œì„±
â”‚  â”‚  â”‚           &sort=ìµœì‹ ìˆœ&search=ê°•ë‚¨
â”‚  â”‚  â”œâ”€ POST   /api/options                    ì˜µì…˜ ìƒì„±
â”‚  â”‚  â”œâ”€ GET    /api/options/:id                ì˜µì…˜ ìƒì„¸
â”‚  â”‚  â”œâ”€ PUT    /api/options/:id                ì˜µì…˜ ìˆ˜ì • (ë³¸ì¸ or Admin)
â”‚  â”‚  â”œâ”€ DELETE /api/options/:id                ì˜µì…˜ ì‚­ì œ ìš”ì²­
â”‚  â”‚  â”‚  â””â”€ Body: { reason: "ì‚¬ìœ " }
â”‚  â”‚  â””â”€ GET    /api/options/my                 ë‚´ê°€ ë“±ë¡í•œ ì˜µì…˜
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /delete-requests (ì‚­ì œ ìš”ì²­)
â”‚  â”‚  â”œâ”€ GET    /api/delete-requests            ì‚­ì œ ìš”ì²­ ëª©ë¡ (Admin)
â”‚  â”‚  â”‚  â””â”€ Query: ?status=ëŒ€ê¸°ì¤‘
â”‚  â”‚  â”œâ”€ GET    /api/delete-requests/:id        ì‚­ì œ ìš”ì²­ ìƒì„¸ (Admin)
â”‚  â”‚  â”œâ”€ POST   /api/delete-requests/:id/approve  ìŠ¹ì¸ (Admin)
â”‚  â”‚  â””â”€ POST   /api/delete-requests/:id/reject   ê±°ë¶€ (Admin)
â”‚  â”‚     â””â”€ Body: { reason: "ê±°ë¶€ ì‚¬ìœ " }
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /proposals (ì œì•ˆ)
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ ğŸ“ /proposals/requests (ì œì•ˆ ìš”ì²­)
â”‚  â”‚  â”‚  â”œâ”€ GET    /api/proposals/requests      ì œì•ˆ ìš”ì²­ ëª©ë¡
â”‚  â”‚  â”‚  â”‚  â””â”€ Query: ?status=ë°œì†¡ì™„ë£Œ&search=í…Œí¬ìŠ¤íƒ€íŠ¸ì—…
â”‚  â”‚  â”‚  â”œâ”€ POST   /api/proposals/requests      ì œì•ˆ ìš”ì²­ ìƒì„±
â”‚  â”‚  â”‚  â”‚  â””â”€ Body: { ê³ ê°ì‚¬ëª…, ë‹´ë‹¹ì_ì´ë¦„, ... }
â”‚  â”‚  â”‚  â”œâ”€ GET    /api/proposals/requests/:id  ì œì•ˆ ìš”ì²­ ìƒì„¸
â”‚  â”‚  â”‚  â”œâ”€ PUT    /api/proposals/requests/:id  ì œì•ˆ ìš”ì²­ ìˆ˜ì •
â”‚  â”‚  â”‚  â”œâ”€ POST   /api/proposals/requests/:id/add     ì¶”ê°€ ì œì•ˆ ìš”ì²­
â”‚  â”‚  â”‚  â”‚  â””â”€ Body: { ì¶”ê°€ë¸Œëœë“œ: [brand_id] }
â”‚  â”‚  â”‚  â””â”€ POST   /api/proposals/requests/:id/modify  ë³€ê²½ ì œì•ˆ ìš”ì²­
â”‚  â”‚  â”‚     â””â”€ Body: { ê³ ê°ì‚¬ëª…, ì…ì£¼ì˜ˆì •ì¼, ... }
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ğŸ“ /proposals/documents (ì œì•ˆì„œ)
â”‚  â”‚     â”œâ”€ GET    /api/proposals/documents     ì œì•ˆì„œ ëª©ë¡
â”‚  â”‚     â”œâ”€ POST   /api/proposals/documents     ì œì•ˆì„œ ìƒì„±
â”‚  â”‚     â”‚  â””â”€ Body: { ì œì•ˆì„œëª…, ì„ íƒì˜µì…˜[], ... }
â”‚  â”‚     â”œâ”€ GET    /api/proposals/documents/:id ì œì•ˆì„œ ìƒì„¸
â”‚  â”‚     â”œâ”€ PUT    /api/proposals/documents/:id ì œì•ˆì„œ ìˆ˜ì •
â”‚  â”‚     â””â”€ GET    /api/proposals/documents/:id/pdf  PDF ë‹¤ìš´ë¡œë“œ
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /upload (íŒŒì¼ ì—…ë¡œë“œ)
â”‚  â”‚  â”œâ”€ POST   /api/upload/image               ì´ë¯¸ì§€ ì—…ë¡œë“œ (Cloudinary)
â”‚  â”‚  â”‚  â””â”€ Body: FormData or { url: "..." }
â”‚  â”‚  â””â”€ POST   /api/upload/pdf                 PDF ì—…ë¡œë“œ (Cloudinary)
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“ /external (ì™¸ë¶€ API ì—°ë™)
â”‚  â”‚  â”œâ”€ POST   /api/external/kakao/address     KakaoMap ì£¼ì†Œ ê²€ìƒ‰
â”‚  â”‚  â”‚  â””â”€ Body: { address: "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬..." }
â”‚  â”‚  â”‚  â””â”€ Response: { ì£¼ì†Œ, ìœ„ë„, ê²½ë„, ì§€í•˜ì² ì—­, ë„ë³´ê±°ë¦¬ }
â”‚  â”‚  â”œâ”€ POST   /api/external/building-registry ê±´ì¶•ë¬¼ëŒ€ì¥ ì¡°íšŒ
â”‚  â”‚  â”‚  â””â”€ Body: { address: "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬..." }
â”‚  â”‚  â”‚  â””â”€ Response: { ì‚¬ìš©ìŠ¹ì¸ì¼, ì§€ìƒì¸µìˆ˜, ì§€í•˜ì¸µìˆ˜, ì—°ë©´ì  }
â”‚  â”‚  â””â”€ POST   /api/external/email/send        ì´ë©”ì¼ ë°œì†¡
â”‚  â”‚     â””â”€ Body: { to, cc, subject, html }
â”‚  â”‚
â”‚  â””â”€ ğŸ“ /admin (ê´€ë¦¬ì)
â”‚     â”œâ”€ GET    /api/admin/dashboard            ëŒ€ì‹œë³´ë“œ í†µê³„
â”‚     â”‚  â””â”€ Response: { 
â”‚     â”‚      ì´ë¸Œëœë“œìˆ˜, ì´ì§€ì ìˆ˜, ì´ì˜µì…˜ìˆ˜, 
â”‚     â”‚      í™œì„±ì‚¬ìš©ììˆ˜, ëŒ€ê¸°ì¤‘ì‚­ì œìš”ì²­ 
â”‚     â”‚    }
â”‚     â”œâ”€ GET    /api/admin/statistics           ê°ì¢… ì§€í‘œ
â”‚     â””â”€ GET    /api/admin/activities           ìµœê·¼ í™œë™ ë‚´ì—­
â”‚
â”œâ”€ ğŸ“ /services (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
â”‚  â”œâ”€ authService.js
â”‚  â”‚  â”œâ”€ register()
â”‚  â”‚  â”œâ”€ verifyEmail()
â”‚  â”‚  â”œâ”€ login()
â”‚  â”‚  â””â”€ generateToken()
â”‚  â”‚
â”‚  â”œâ”€ userService.js
â”‚  â”‚  â”œâ”€ getUsers()
â”‚  â”‚  â”œâ”€ getUserById()
â”‚  â”‚  â”œâ”€ updateUser()
â”‚  â”‚  â””â”€ deleteUser()
â”‚  â”‚
â”‚  â”œâ”€ brandService.js
â”‚  â”‚  â”œâ”€ getBrands()
â”‚  â”‚  â”œâ”€ createBrand()
â”‚  â”‚  â”œâ”€ checkDuplicate()
â”‚  â”‚  â””â”€ getAvailableBrandsForAddition()
â”‚  â”‚
â”‚  â”œâ”€ managerService.js
â”‚  â”œâ”€ branchService.js
â”‚  â”œâ”€ optionService.js
â”‚  â”‚  â”œâ”€ getOptions()
â”‚  â”‚  â”œâ”€ createOption()
â”‚  â”‚  â”œâ”€ updateOption()
â”‚  â”‚  â”œâ”€ requestDelete()
â”‚  â”‚  â””â”€ getMyOptions()
â”‚  â”‚
â”‚  â”œâ”€ deleteRequestService.js
â”‚  â”‚  â”œâ”€ getDeleteRequests()
â”‚  â”‚  â”œâ”€ approveDeleteRequest()
â”‚  â”‚  â””â”€ rejectDeleteRequest()
â”‚  â”‚
â”‚  â”œâ”€ proposalRequestService.js
â”‚  â”‚  â”œâ”€ createProposalRequest()
â”‚  â”‚  â”œâ”€ addProposalRequest()
â”‚  â”‚  â”œâ”€ modifyProposalRequest()
â”‚  â”‚  â””â”€ sendProposalEmails()
â”‚  â”‚
â”‚  â”œâ”€ proposalDocumentService.js
â”‚  â”‚  â”œâ”€ createProposalDocument()
â”‚  â”‚  â”œâ”€ generatePDF()
â”‚  â”‚  â””â”€ getProposalDocuments()
â”‚  â”‚
â”‚  â”œâ”€ uploadService.js
â”‚  â”‚  â”œâ”€ uploadToCloudinary()
â”‚  â”‚  â””â”€ uploadFromUrl()
â”‚  â”‚
â”‚  â””â”€ emailService.js
â”‚     â”œâ”€ sendEmail()
â”‚     â”œâ”€ generateEmailTemplate()
â”‚     â””â”€ generateSignature()
â”‚
â”œâ”€ ğŸ“ /middlewares
â”‚  â”œâ”€ authMiddleware.js              JWT ì¸ì¦
â”‚  â”œâ”€ adminMiddleware.js             Admin ê¶Œí•œ í™•ì¸
â”‚  â”œâ”€ validationMiddleware.js        ì…ë ¥ ê²€ì¦
â”‚  â”œâ”€ errorMiddleware.js             ì—ëŸ¬ í•¸ë“¤ë§
â”‚  â””â”€ rateLimitMiddleware.js         ìš”ì²­ ì œí•œ
â”‚
â”œâ”€ ğŸ“ /models (Prisma Schema)
â”‚  â””â”€ schema.prisma
â”‚     â”œâ”€ model User
â”‚     â”œâ”€ model EmailVerification
â”‚     â”œâ”€ model Brand
â”‚     â”œâ”€ model Manager
â”‚     â”œâ”€ model Branch
â”‚     â”œâ”€ model Option
â”‚     â”œâ”€ model DeleteRequest
â”‚     â”œâ”€ model ProposalRequest
â”‚     â”œâ”€ model ProposalSendHistory
â”‚     â””â”€ model ProposalDocument
â”‚
â”œâ”€ ğŸ“ /utils
â”‚  â”œâ”€ logger.js                      ë¡œê¹…
â”‚  â”œâ”€ validators.js                  ê²€ì¦ í•¨ìˆ˜
â”‚  â”œâ”€ formatters.js                  í¬ë§·íŒ…
â”‚  â”œâ”€ dateUtils.js                   ë‚ ì§œ ì²˜ë¦¬
â”‚  â””â”€ errorHandler.js                ì—ëŸ¬ ì²˜ë¦¬
â”‚
â”œâ”€ ğŸ“ /config
â”‚  â”œâ”€ database.js                    DB ì„¤ì •
â”‚  â”œâ”€ cloudinary.js                  Cloudinary ì„¤ì •
â”‚  â”œâ”€ email.js                       ì´ë©”ì¼ ì„¤ì •
â”‚  â””â”€ constants.js                   ìƒìˆ˜ ì •ì˜
â”‚
â””â”€ ğŸ“ /tests
   â”œâ”€ /unit
   â”‚  â”œâ”€ auth.test.js
   â”‚  â”œâ”€ brand.test.js
   â”‚  â””â”€ option.test.js
   â””â”€ /integration
      â”œâ”€ proposal.test.js
      â””â”€ admin.test.js