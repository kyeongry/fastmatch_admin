[phases.setup]
nixPkgs = ["nodejs_18", "chromium", "libuuid"]
aptPkgs = ["chromium", "libnss3", "libatk1.0-0", "libatk-bridge2.0-0", "libcups2", "libdrm2", "libxkbcommon0", "libxcomposite1", "libxdamage1", "libxrandr2", "libgbm1", "libasound2", "fonts-noto-cjk"]

[phases.install]
cmds = ["npm install"]

[phases.build]
cmds = [
  "echo '=== RAILPACK BUILD DEBUG ==='",
  "echo 'Current directory:' && pwd",
  "echo 'All files:' && ls -la",
  "echo 'pdfform check:' && ls -la pdfform/ 2>/dev/null || echo 'pdfform NOT FOUND'",
  "echo 'templates check:' && ls -la pdfform/templates/ 2>/dev/null || echo 'templates NOT FOUND'"
]

[start]
cmd = "npm start"

[variables]
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD = "true"
PUPPETEER_EXECUTABLE_PATH = "/usr/bin/chromium"

# Railpack에게 모든 파일을 포함하도록 지시
[paths]
include = ["*", "**/*"]
